(function(){window.gen_complete=true;var d=0;window.require(["pubsub"],function(t){t.subscribe("end.processing",function(){console.log("Finished");d--;if(d===0){window.gen_complete=true}})});window.require(["pubsub"],function(t){t.subscribe("start.processing",function(){console.log("Starting");d++;window.gen_complete=false})});var r=["Austin, TX","Eiffel Tower, Paris, France","Denver, CO","Vancouver, BC","San Francisco, CA","Rome","Seattle, WA","Osaka-jo, Osaka, Japan","Reflecting Pool, Washington DC","Amsterdam","Portland, OR","Shanghai, China","Orland Park, Chicago, IL","Melbourne, Australia","Cairo, Egypt"],e=[5,10,20],j=$("#location_search_text"),c=$("#route_length"),a=$("#auto_route_button"),q=r.length,k=e.length,m=0,f=0,p=11,l,h=1,i=$('<span id="demo_countdown">').text("0").css("font-size","120%"),s=$('<p id="demo_message">').css({"text-align":"center",clear:"both","margin-top":"2rem","font-weight":"bold",border:"1px solid #666",padding:"0.5rem","border-width":"1px 0","background-color":"#ddd"}).append("Generating new route in ",i," seconds."),o=$('<a id="demo_pause" data-active="Pause" data-inactive="Unpause" class="button">Pause</a>').on("click",function(){if(l){n();o.text(o.data("inactive"))}else{g();o.text(o.data("active"))}}),b=function(){if(!window.gen_complete){return}i.text(--h);if(h>0){return}j.val(r[m]).trigger("change");c.val(e[Math.floor(Math.random()*k)]);a.click();m=m<q-1?m+1:0;h=p},n=function(){window.clearInterval(l);l=null},g=function(){l=window.setInterval(b,1000)};$("label[for=route_length]").text("Length (approx.):");$("#map_container").find("div").filter('[title="MapQuest OSM layer"]').click();$("#left").find(".inner").append(s);window.undemo=n;g();s.append("<br/><br/>",o)}());